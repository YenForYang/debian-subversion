<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Subversion: Apply a patch to the working copy</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="svn-square.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Subversion
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Apply a patch to the working copy<div class="ingroups"><a class="el" href="group__clnt__wc.html">Client working copy management</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga62bd538cc0aa7adabd3ff948d44973b7"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structsvn__error__t.html">svn_error_t</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Patch.html#ga62bd538cc0aa7adabd3ff948d44973b7">svn_client_patch_func_t</a>) (void *baton, <a class="el" href="svn__types_8h.html#a22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a> *filtered, const char *canon_path_from_patchfile, const char *patch_abspath, const char *reject_abspath, apr_pool_t *scratch_pool)</td></tr>
<tr class="memdesc:ga62bd538cc0aa7adabd3ff948d44973b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The callback invoked by <a class="el" href="group__Patch.html#ga36d374f7c5d984cd93bba72a8a890ded" title="Apply a unidiff patch that&#39;s located at absolute path patch_abspath to the working copy directory at ...">svn_client_patch()</a> before attempting to patch the target file at <em>canon_path_from_patchfile</em> (the path as parsed from the patch file, but in canonicalized form).  <a href="#ga62bd538cc0aa7adabd3ff948d44973b7">More...</a><br /></td></tr>
<tr class="separator:ga62bd538cc0aa7adabd3ff948d44973b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga36d374f7c5d984cd93bba72a8a890ded"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsvn__error__t.html">svn_error_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Patch.html#ga36d374f7c5d984cd93bba72a8a890ded">svn_client_patch</a> (const char *patch_abspath, const char *wc_dir_abspath, <a class="el" href="svn__types_8h.html#a22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a> dry_run, int strip_count, <a class="el" href="svn__types_8h.html#a22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a> reverse, <a class="el" href="svn__types_8h.html#a22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a> ignore_whitespace, <a class="el" href="svn__types_8h.html#a22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a> remove_tempfiles, <a class="el" href="group__Patch.html#ga62bd538cc0aa7adabd3ff948d44973b7">svn_client_patch_func_t</a> patch_func, void *patch_baton, <a class="el" href="structsvn__client__ctx__t.html">svn_client_ctx_t</a> *ctx, apr_pool_t *scratch_pool)</td></tr>
<tr class="memdesc:ga36d374f7c5d984cd93bba72a8a890ded"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply a unidiff patch that's located at absolute path <em>patch_abspath</em> to the working copy directory at <em>wc_dir_abspath</em>.  <a href="#ga36d374f7c5d984cd93bba72a8a890ded">More...</a><br /></td></tr>
<tr class="separator:ga36d374f7c5d984cd93bba72a8a890ded"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga62bd538cc0aa7adabd3ff948d44973b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga62bd538cc0aa7adabd3ff948d44973b7">&#9670;&nbsp;</a></span>svn_client_patch_func_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structsvn__error__t.html">svn_error_t</a>*(* svn_client_patch_func_t) (void *baton, <a class="el" href="svn__types_8h.html#a22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a> *filtered, const char *canon_path_from_patchfile, const char *patch_abspath, const char *reject_abspath, apr_pool_t *scratch_pool)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The callback invoked by <a class="el" href="group__Patch.html#ga36d374f7c5d984cd93bba72a8a890ded" title="Apply a unidiff patch that&#39;s located at absolute path patch_abspath to the working copy directory at ...">svn_client_patch()</a> before attempting to patch the target file at <em>canon_path_from_patchfile</em> (the path as parsed from the patch file, but in canonicalized form). </p>
<p>The callback can set <em>*filtered</em> to <code>TRUE</code> to prevent the file from being patched, or else must set it to <code>FALSE</code>.</p>
<p>The callback is also provided with <em>patch_abspath</em>, the path of a temporary file containing the patched result, and with <em>reject_abspath</em>, the path to a temporary file containing the diff text of any hunks which were rejected during patching.</p>
<p>Because the callback is invoked before the patching attempt is made, there is no guarantee that the target file will actually be patched successfully. Client implementations must pay attention to notification feedback provided by <a class="el" href="group__Patch.html#ga36d374f7c5d984cd93bba72a8a890ded" title="Apply a unidiff patch that&#39;s located at absolute path patch_abspath to the working copy directory at ...">svn_client_patch()</a> to find out which paths were patched successfully.</p>
<p>Note also that the files at <em>patch_abspath</em> and <em>reject_abspath</em> are guaranteed to remain on disk after patching only if the <em>remove_tempfiles</em> parameter for <a class="el" href="group__Patch.html#ga36d374f7c5d984cd93bba72a8a890ded" title="Apply a unidiff patch that&#39;s located at absolute path patch_abspath to the working copy directory at ...">svn_client_patch()</a> is <code>FALSE</code>.</p>
<p>The const char * parameters may be allocated in <em>scratch_pool</em> which will be cleared after each invocation.</p>
<dl class="section since"><dt>Since</dt><dd>New in 1.7. </dd></dl>

<p class="definition">Definition at line <a class="el" href="svn__client_8h_source.html#l07912">7912</a> of file <a class="el" href="svn__client_8h_source.html">svn_client.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga36d374f7c5d984cd93bba72a8a890ded"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga36d374f7c5d984cd93bba72a8a890ded">&#9670;&nbsp;</a></span>svn_client_patch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsvn__error__t.html">svn_error_t</a>* svn_client_patch </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>patch_abspath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>wc_dir_abspath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="svn__types_8h.html#a22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a>&#160;</td>
          <td class="paramname"><em>dry_run</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>strip_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="svn__types_8h.html#a22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a>&#160;</td>
          <td class="paramname"><em>reverse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="svn__types_8h.html#a22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a>&#160;</td>
          <td class="paramname"><em>ignore_whitespace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="svn__types_8h.html#a22b35baddc4213c688d1bb12feea1024">svn_boolean_t</a>&#160;</td>
          <td class="paramname"><em>remove_tempfiles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__Patch.html#ga62bd538cc0aa7adabd3ff948d44973b7">svn_client_patch_func_t</a>&#160;</td>
          <td class="paramname"><em>patch_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>patch_baton</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsvn__client__ctx__t.html">svn_client_ctx_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_pool_t *&#160;</td>
          <td class="paramname"><em>scratch_pool</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply a unidiff patch that's located at absolute path <em>patch_abspath</em> to the working copy directory at <em>wc_dir_abspath</em>. </p>
<p>This function makes a best-effort attempt at applying the patch. It might skip patch targets which cannot be patched (e.g. targets that are outside of the working copy). It will also reject hunks which cannot be applied to a target in case the hunk's context does not match anywhere in the patch target.</p>
<p>If <em>dry_run</em> is TRUE, the patching process is carried out, and full notification feedback is provided, but the working copy is not modified.</p>
<p><em>strip_count</em> specifies how many leading path components should be stripped from paths obtained from the patch. It is an error if a negative strip count is passed.</p>
<p>If <em>reverse</em> is <code>TRUE</code>, apply patches in reverse, deleting lines the patch would add and adding lines the patch would delete.</p>
<p>If <em>ignore_whitespace</em> is TRUE, allow patches to be applied if they only differ from the target by whitespace.</p>
<p>If <em>remove_tempfiles</em> is TRUE, lifetimes of temporary files created during patching will be managed internally. Otherwise, the caller should take ownership of these files, the names of which can be obtained by passing a <em>patch_func</em> callback.</p>
<p>If <em>patch_func</em> is non-NULL, invoke <em>patch_func</em> with <em>patch_baton</em> for each patch target processed.</p>
<p>If <em>ctx-&gt;notify_func2</em> is non-NULL, invoke <em>ctx-&gt;notify_func2</em> with <em>ctx-&gt;notify_baton2</em> as patching progresses.</p>
<p>If <em>ctx-&gt;cancel_func</em> is non-NULL, invoke it passing <em>ctx-&gt;cancel_baton</em> at various places during the operation.</p>
<p>Use <em>scratch_pool</em> for temporary allocations.</p>
<dl class="section since"><dt>Since</dt><dd>New in 1.7. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
